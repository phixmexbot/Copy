<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=600, initial-scale=0.5 maximum-scale=1, user-scalable=no">
  <title>Core</title>
  <link rel="icon" type="image/svg+xml" href="/static/assets/logo.svg">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/top-menu.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/background.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/footer.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/logo.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/bottom-menu.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/snow.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/attention-button.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles/chat.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
  <link rel='stylesheet' href='https://code.ionicframework.com/ionicons/1.5.2/css/ionicons.min.css'>
  <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Open+Sans'>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.3/jquery.mCustomScrollbar.min.css'>
  <style>
    body {
      background: linear-gradient(#0f1a2b, #411d63);
      margin: 0;
      overflow: hidden;
    }

    .load {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 100px;
      height: 100px;
      opacity: 1;
      transition: opacity 0.3s ease-in-out; /* Change 1s to 0.3s */
    }

    .load hr {
      border: 0;
      margin: 0;
      width: 25%;
      height: 25%;
      position: absolute;
      border-radius: 50%;
      animation: spin 2s linear infinite;
      top: 17px;
      left: 17px;
    }

    .load hr:nth-child(1) {
      background: #19A68C;
      animation-delay: -1.5s;
    }

    .load hr:nth-child(2) {
      background: #F63D3A;
      animation-delay: -1s;
    }

    .load hr:nth-child(3) {
      background: #FDA543;
      animation-delay: -0.5s;
    }

    .load hr:nth-child(4) {
      background: #193B48;
    }

    @keyframes spin {
      0%, 100% {
        transform: translate(0);
      }
      25% {
        transform: translate(160%);
      }
      50% {
        transform: translate(160%, 160%);
      }
      75% {
        transform: translate(0, 160%);
      }
    }

    /* Initial content hidden with opacity 0 */
    #content {
      display: block;
      opacity: 0;
      transition: opacity 0.3s ease-in-out; /* Change 1s to 0.3s */
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
</head>
<body>
  <!-- Preloader -->
  <div class="load">
    <hr/><hr/><hr/><hr/>
  </div>

  <!-- Content that will load after the preloader -->
  <div id="content">

<div class="chat">
  <div class="chat-title">
    <h1>Komiljon</h1>
    <h2>Student</h2>
    <figure class="avatar">
      <img src="static/assets/profile.png" /></figure>
  </div>
  <div class="messages">
    <div class="messages-content"></div>
  </div>
  <div class="message-box">
    <textarea type="text" class="message-input" placeholder="Type message..."></textarea>
    <button type="submit" class="message-submit">Send</button>
  </div>
</div>
    
<div class="moon">
  <span class="crater"></span>
  <span class="crater"></span>
  <span class="crater"></span>
  <span class="crater"></span>
</div>
<div class="ground">
  <div class="rock"></div>
  <div class="rock"></div>
  <div class="rock"></div>
</div>
<div class="shooting">
  <div class="core"></div>
  <div class="trail"></div>
</div>
  <object type="image/svg+xml" data="/static/assets/cactus.svg" class="cactus"></object>
  <div class="logo-container">
    <img src="https://raw.githubusercontent.com/phixmexbot/recources/main/logo.svg" alt="Logo" class="logo">
  </div>
  <footer class="footer">
    <a href="/copyright" class="footer-link">
      <span class="footer-text">Â© Core 2024</span>
    </a>
  </footer>
<div id="app"></div>
<canvas id="canvas"></canvas>
<div class="snow-container"></div>
  
<script src="https://cdn.tailwindcss.com/3.4.5"></script>

  <div class="bg-black/0 w-screen h-[200vh] flex flex-col justify-end">
      <div class="bg-black/60 w-96 mx-auto mb-20 flex justify-stretch rounded-md backdrop-blur z-2">
          <a href="mailto:komiljon@eternal.uz" class="text-slate-200 hover:text-white hover:bg-black/20 w-1/4 py-3 flex flex-col items-center hover:scale-110 rounded-md transition-all">
              <i class="fa-solid fa-envelope icon-size"></i>
              <small>Email</small>
          </a>
          <a href="https://github.com/komil-jon" class="text-slate-200 hover:text-white hover:bg-black/20 w-1/4 py-3 flex flex-col items-center hover:scale-110 rounded-md transition-all">
              <i class="fa-brands fa-github icon-size"></i>
              <small>Github</small>
          </a>
          <a href="https://linkedin.com/in/komiljon" class="text-slate-200 hover:text-white hover:bg-black/20 w-1/4 py-3 flex flex-col items-center hover:scale-110 rounded-md transition-all">
              <i class="fa-brands fa-linkedin icon-size"></i>
              <small>Linkedin</small>
          </a>
          <a href="https://instagram.com/komil.john" class="text-slate-200 hover:text-white hover:bg-black/20 w-1/4 py-3 flex flex-col items-center hover:scale-110 rounded-md transition-all">
              <i class="fa-brands fa-instagram icon-size"></i>
              <small>Instagram</small>
          </a>
          <a href="https://telegram.me/eternal_py" class="text-slate-200 hover:text-white hover:bg-black/20 w-1/4 py-3 flex flex-col items-center hover:scale-110 rounded-md transition-all">
              <i class="fa-brands fa-telegram icon-size"></i>
              <small>Telegram</small>
          </a>
      </div>
  </div>
    
  <canvas id="canvas-club"></canvas>
  <canvas id="sparks" style="z-index: 1;"></canvas>
    
  <button class="circle-action-btn">
    <div class="circle-action-btn__icon"><i class="ion-android-hand"></i></div>
  </button>
    
  </div>

  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.4.3/pixi.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/pixi-filters@2.6.1/dist/pixi-filters.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.3/jquery.mCustomScrollbar.concat.min.js'></script>
  
  <script src="{{ url_for('static', filename='scripts/background.js') }}"></script>
  <script src="{{ url_for('static', filename='scripts/top-menu.js') }}"></script>
  <script src="{{ url_for('static', filename='scripts/light.js') }}"></script>
  <script src="{{ url_for('static', filename='scripts/rain.js') }}"></script>
  <script src="{{ url_for('static', filename='scripts/snow.js') }}"></script>
  <script src="{{ url_for('static', filename='scripts/chat.js') }}"></script>

  <script>
    // Hide the preloader and show the content with smooth transitions
    window.addEventListener('load', function() {
      const loader = document.querySelector('.load');
      const content = document.querySelector('#content');
      
      // Fade out the loader
      loader.style.opacity = '0';

      // Once loader is faded out (after 1s), display the content
      setTimeout(function() {
        loader.style.display = 'none';  // Hide loader after fade-out
        content.style.opacity = '1';    // Fade-in content
      }, 300); // Change 1000ms to 300ms
    });


    function getWeather(lat, lon) {
      const apiKey = 'YOUR_API_KEY'; // Replace with your OpenWeatherMap API key
      const weatherUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${apiKey}`;
    
      fetch(weatherUrl)
        .then(response => response.json())
        .then(data => {
          const weatherConditions = data.weather.map(condition => condition.main.toLowerCase());
          console.log("Weather conditions: ", weatherConditions);
    
          const hashTags = [];
    
          if (weatherConditions.includes('rain')) {
            hashTags.push('#rain');
          }
          if (weatherConditions.includes('snow')) {
            hashTags.push('#snow');
          }
          if (weatherConditions.includes('thunderstorm')) {
            hashTags.push('#light');
          }
    
          // If any conditions match, cycle through them
          if (hashTags.length > 0) {
            cycleThroughHashes(hashTags);
          }
        })
        .catch(error => console.error("Error fetching weather data: ", error));
    }
    
    function cycleThroughHashes(hashTags) {
      let index = 0;
    
      function changeHash() {
        if (index < hashTags.length) {
          window.location.hash = hashTags[index];
          index++;
          setTimeout(changeHash, 1000); // Wait 1 second before switching to the next hash
        }
      }
    
      changeHash(); // Start the cycle
    }
    
    // Example of how to call getWeather with a position (assuming lat and lon are obtained from geolocation)
    function showPosition(position) {
      let lat = position.coords.latitude;
      let lon = position.coords.longitude;
      getWeather(lat, lon);
    }
    
    // Geolocation code remains the same
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition, showError);
    } else {
      alert("Geolocation is not supported by this browser.");
    }
    
    function showError(error) {
      switch (error.code) {
        case error.PERMISSION_DENIED:
          alert("User denied the request for Geolocation.");
          break;
        case error.POSITION_UNAVAILABLE:
          alert("Location information is unavailable.");
          break;
        case error.TIMEOUT:
          alert("The request to get user location timed out.");
          break;
        case error.UNKNOWN_ERROR:
          alert("An unknown error occurred.");
          break;
      }
    }
  </script>
</body>
</html>
